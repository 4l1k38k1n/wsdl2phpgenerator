<?php
/**
 * @package wsdl2phpTest
 */

/**
 * Including all needed files
 */
require_once 'PHPUnit/Framework.php';

require_once dirname(__FILE__).'/../src/Validator.php';

/**
 * Test class for Wsdl2PhpValidator.
 * Generated by PHPUnit on 2009-11-11 at 00:56:02.
 * 
 * @package wsdl2phpTest
 */
class ValidatorTest extends PHPUnit_Framework_TestCase
{
  /**
   * @var Wsdl2PhpValidator
   */
  protected $object;

  /**
   * Sets up the fixture, for example, opens a network connection.
   * This method is called before a test is executed.
   */
  protected function setUp()
  {
    $this->object = null;
  }

  /**
   * Tears down the fixture, for example, closes a network connection.
   * This method is called after a test is executed.
   */
  protected function tearDown()
  {
  }

  /**
   * Testing the validate class function
   */
  public function testValidateClass()
  {
    $this->assertEquals('foo', wsdl2phpValidator::validateClass('foo'));
    $this->assertEquals('foobar', wsdl2phpValidator::validateClass('foo-bar'));
    $this->assertEquals('Foo', wsdl2phpValidator::validateClass('Foo'));
    $this->assertEquals('foo523', wsdl2phpValidator::validateClass('foo523'));

    $this->setExpectedException('wsdl2phpValidationException');
    wsdl2phpValidator::validateClass('SoapClient');

    $this->setExpectedException('wsdl2phpValidationException');
    $this->assertEquals('for', wsdl2phpValidator::validateClass('for')); // for is reserved keyword
  }

  /**
   * Testing the validate class function with a reserved keyword
   */
  public function testValidateClassReservedKeyword()
  {
    $this->setExpectedException('wsdl2phpValidationException');
    $this->assertEquals('for', wsdl2phpValidator::validateClass('for')); // for is reserved keyword
    $this->assertEquals('List', wsdl2phpValidator::validateClass('List')); // for is reserved keyword
  }

  /**
   * Testing the validate class function with another reserved keyword
   */
  public function testValidateClassReservedKeyword2()
  {
    $this->setExpectedException('wsdl2phpValidationException');
    $this->assertEquals('List', wsdl2phpValidator::validateClass('List')); // list is reserved keyword. PHP is not case sensitive in keywords
  }

  /**
   * Test the typename
   */
  public function testValidateType()
  {
    $this->assertEquals('foo', wsdl2phpValidator::validateType('foo'));
    $this->assertEquals('foobar', wsdl2phpValidator::validateType('foo-bar'));
    $this->assertEquals('Foo', wsdl2phpValidator::validateType('Foo'));
    $this->assertEquals('foo523', wsdl2phpValidator::validateType('foo523'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('arrayOf_test'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('arrayOfTest'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('test[]'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('ArrayOf_xsd_int'));

    $this->assertEquals('int', wsdl2phpValidator::validateType('nonNegativeInteger'));
    $this->assertEquals('float', wsdl2phpValidator::validateType('float'));
    $this->assertEquals('string', wsdl2phpValidator::validateType('normalizedString'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('ArrayOfFoo'));
    $this->assertEquals('array', wsdl2phpValidator::validateType('Foo[]'));

    $this->setExpectedException('wsdl2phpValidationException');
    $this->assertEquals('and', wsdl2phpValidator::validateType('and')); // and is reserved keyword
  }

  /**
   * test the name
   */
  public function testValidateNamingConvention()
  {
    $this->assertEquals('foo', wsdl2phpValidator::validateNamingConvention('foo'));
    $this->assertEquals('foobar', wsdl2phpValidator::validateNamingConvention('foo-bar'));
    $this->assertEquals('Foo', wsdl2phpValidator::validateNamingConvention('Foo'));
    $this->assertEquals('foo523', wsdl2phpValidator::validateNamingConvention('foo523'));
    $this->assertEquals('a123foo', wsdl2phpValidator::validateNamingConvention('123foo'));
    $this->assertEquals('a123foo123', wsdl2phpValidator::validateNamingConvention('123foo$123'));
    $this->assertEquals('a123foo', wsdl2phpValidator::validateNamingConvention('123f|o|o'));
  }
}
?>
